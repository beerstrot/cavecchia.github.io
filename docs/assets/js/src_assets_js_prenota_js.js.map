{"version":3,"file":"src_assets_js_prenota_js.js","mappings":"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","sources":["webpack://foundation-zurb-template/./src/assets/js/prenota.js"],"sourcesContent":["import { bana, mkCall, testeLambda } from './utils';\n\n$(document).ready(() => {\n  const url = new URL(window.location.href);\n  const pid = url.searchParams.get('id');\n  if (pid) {\n    if (pid === 'notes') {\n      return showNotes();\n    } else if (pid === 'days') {\n      return showDays();\n    } else if (pid === 'test') {\n      return testeLambda();\n    } else if (pid.endsWith('_modifica')) {\n      return makeInterface_(pid);\n    }\n    return showReservation(pid);\n  }\n  makeInterface_();\n});\n\nfunction makeInterface_ (pid) {\n  mkCall(\n    'POST',\n    { action: 'days', data: '--' },\n    res => {\n      if (pid) {\n        const pid_ = pid.split('_modifica')[0];\n        const fp = makeInterface(pid_, res.dates);\n        modifyReservation(pid_, fp);\n      } else {\n        makeInterface(undefined, res.dates);\n      }\n    },\n    res => {\n      showMessage(messageError);\n    }\n  );\n}\n\nconst loadExtra = booking => {\n  const e = JSON.parse(booking.extra);\n  return e;\n}\n\nfunction modifyReservation (pid, fp) {\n  mkCall(\n    'POST',\n    { action: 'getReservation', data: pid },\n    res => {\n      $('#ttitle').text('Modica la Prenotazione');\n      $('<p/>').text('La prenotazione viene modificata solo quando clicchi il pulsante \"Modifica Prenotazione\"')\n        .insertAfter('#ttitle');\n      $('#prenota').text('Modifica Prenotazione');\n      const b = res.booking;\n      const bc = b.booking_customer;\n      const extra = loadExtra(b);\n      const date = new Date(b.booked_for);\n      fp.setDate(date);\n      $('#quantity').prop('disabled', false).val(b.people);\n      updateShifts(date, b.shift_id, b.people);\n      $('#obs').val(extra.note === '--' ? '' : extra.note);\n      $('#seggiolini').val(extra.seggiolini);\n      $('#cani').prop('checked', extra.cani);\n      $('#name').val(bc.first_name);\n      $('#surname').val(bc.last_name);\n      $('#email').val(extra.email);\n      $('#telephone').val(extra.telephone);\n    },\n    res => {\n      showMessage(`${messageError}\n        La ID della prenotazione è: ${pid}.`);\n    }\n  );\n}\n\nfunction showDays (datetime) {\n  $('#form').hide();\n  $('#notesTable').hide();\n  $('#notesDiv').show().css('margin-bottom', '10%');\n  $('#innerNotesDiv').css('margin-top', '0%');\n  $('#ttitle').text('Giorni di Chiusura');\n  $('#yes').text('Aggiungi/rimuovi');\n  $('#no').text('Non aggiungere/rimuovere');\n  mkCall(\n    'POST',\n    { action: 'days', data: datetime || '--' },\n    res => {\n      const r = res;\n      $('#innerNotesDiv').html('<b>Giorni di chiusura:</b><br>' + r.dates.join('<br>'));\n      //jQuery('#from2').flatpickr({\n      const fp = $('#from2').flatpickr({\n        minDate: 'today',\n        locale: 'it',\n        dateFormat:'d/M/Y',\n        disableMobile: true,\n        onChange: (dp, input) => {\n          dp[0].setHours(12);\n          toggleDate(dp[0]);\n        },\n      });\n    },\n    res => {\n      showMessage(messageError);\n    }\n  );\n}\n\nfunction toggleDate (dp) {\n  const date_ = (new Date(dp)).toLocaleString('it-IT', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });\n  showConsultaMessage(`<p>Sei sicuro di voler aggiungere o rimuovere <b>${date_}</b> come giorno di chiusura?</p>\n    <p style=\"margin-bottom:0px;\">Se lo aggiungi</b> ai giorni di chiusura:</p><ul><li>Tutte le prenotazione per  <b>${date_}</b> saranno cancellate</li><li>I clienti prenotati <b>${date_}</b> riceveranno l'email di chiusura e cancellazione della prenotazione</li>\n    </ul><p style=\"margin-bottom:0px;\">Se lo rimuovi dai giorni di chiusura:</p><ul><li>I clienti potranno prenotare per il giorno <b>${date_}</b></li></ul>`,'',\n    () => {\n      const date = dp.toISOString();\n      showDays(date);\n      $('#close-modal').click();\n    },\n    () => $('#close-modal').click(),\n    true,\n  );\n}\n\nfunction showNotes (datetime) {\n  $('#ttitle').text('Dashboard');\n  $('#loading').show();\n  $('#form').hide();\n  $('#notesDiv').show();\n  $('#innerNotesDiv').show();\n  $('.clearme').remove();\n  datetime = datetime || new Date().toISOString();\n  mkCall(\n    'GET',\n    { action: 'notes', data: datetime },\n    res => {\n      const r = JSON.parse(res);\n      const date = (new Date(r.date)).toLocaleString('it-IT', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });\n      const tables = {};\n      r.rooms.forEach(r => {\n        r.tables.forEach(t => {\n          tables[t.id] = t.name;\n        });\n      });\n      const shifts = r.shifts.reduce((a, i) => {\n        a[i.id] = i;\n        a[i.id].bookings = [];\n        a[i.id].obookings = [];\n        return a;\n      }, {});\n      shifts.anon = { name: 'anon', bookings: [] };\n      //jQuery('#from2').flatpickr({\n      const fp = $('#from2').flatpickr({\n        locale: 'it',\n        dateFormat:'d/M/Y',\n        disableMobile: true,\n        onChange: (dp, input) => {\n          dp[0].setHours(12);\n          showNotes(dp[0].toISOString());\n        },\n      });\n\n      const b = r.bookings;\n      const nbookings = b.length;\n      if (!nbookings) return showNotesMessage(`<b>${date}</b> non ci sono prenotazioni.`);\n\n      let nseggiolini = 0;\n      let ncani = 0;\n      const notes = [];\n      const data = [];\n      b.forEach((i, ii) => {\n        try {\n          const n = loadExtra(i);\n          if (!('seggiolini' in n))\n            return\n          notes.push(n);\n          i.notes_ = n;\n          shifts[i.shift_id].obookings.push(i)\n          const s = Number(n.seggiolini);\n          const c = Boolean(n.cani);\n          nseggiolini += s;\n          ncani += c;\n          const bc = i.booking_customer;\n          data.push({\n            name: bc.first_name + ' ' + bc.last_name,\n            people: i.people,\n            table: i.tables.reduce((a, i) => {\n              a.push(tables[i.table_id]);\n              return a;\n            }, []).join(', '),\n            telephone: n.telephone || '',\n            email: n.email || '',\n            time: new Date(i.booked_for).toLocaleString('it-it', { hour: '2-digit', minute:'2-digit' }),\n            cani: c ? 'SI' : '',\n            seg: s == 0 ? '' : s,\n            note: n.note\n          });\n        } catch (e) {\n          if (i.shift_id === null)\n            return shifts.anon.bookings.push(i);\n          shifts[i.shift_id].bookings.push(i);\n        }\n      });\n      data.sort((a, b) => a.time < b.time ? -1 : 1).forEach(n => {\n        const tr = $('<tr/>', { class: 'clearme' }).appendTo('#notesTableBody');\n        $('<td/>', { css: { 'text-align': 'left' } }).html(n.name).appendTo(tr);\n        $('<td/>', { css: { 'text-align': 'right' } }).html(n.people).appendTo(tr);\n        $('<td/>').html(n.table).appendTo(tr);\n        $('<td/>', { css: { 'text-align': 'left' } }).html(n.time).appendTo(tr);\n        $('<td/>').html(n.cani).appendTo(tr);\n        $('<td/>', { css: { 'text-align': 'right' } }).html(n.seg).appendTo(tr);\n        $('<td/>', { css: { 'text-align': 'left' } }).html(n.note).appendTo(tr);\n        $('<td/>', { css: { 'text-align': 'left' } }).html(n.telephone).appendTo(tr);\n        $('<td/>', { css: { 'text-align': 'left' } }).html(n.email).appendTo(tr);\n\n      });\n      const sentences = [];\n      let total_ = 0;\n      for (const k in shifts) {\n        const s = shifts[k];\n        if (k === 'anon') continue;\n        s.people_online = s.obookings.reduce((a, ss) => a + ss.people, 0);\n        s.people_hand = s.bookings.reduce((a, ss) => a + ss.people, 0);\n        const total = s.people_online + s.people_hand;\n        total_ += total;\n        if (total === 0) continue\n        const tr = $('<tr/>', { class: 'clearme' }).appendTo('#shiftsTableBody');\n        $('<td/>', { css: { 'text-align': 'left'  } }).html(s.name).appendTo(tr);\n        $('<td/>', { css: { 'text-align': 'right' } }).html(total).appendTo(tr);\n        $('<td/>', { css: { 'text-align': 'right' } }).html(s.people_online).appendTo(tr);\n        $('<td/>', { css: { 'text-align': 'right' } }).html(s.people_hand).appendTo(tr);\n      }\n      shifts.anon.bookings.forEach(b => {\n        const { t, t2 } = getBookingTimes(b, true);\n        const tr = $('<tr/>', { class: 'clearme' }).appendTo('#anonTableBody');\n        $('<td/>', { css: { 'text-align': 'left'  } }).html(t).appendTo(tr);\n        $('<td/>', { css: { 'text-align': 'left'  } }).html(t2).appendTo(tr);\n        $('<td/>', { css: { 'text-align': 'right' } }).html(b.people).appendTo(tr);\n        $('<td/>', { css: { 'text-align': 'left'  } }).html(\n          b.tables.reduce((a, i) => {\n            a.push(tables[i.table_id]);\n            return a;\n          }, []).join(', ')\n        ).appendTo(tr)\n        total_ += b.people;\n      });\n      const summary = `<ul class=\"no-bullet\"><b>${date}</b> ci sono:<li><b>${nbookings}</b> prenotazioni (<b>${notes.length}</b> online)</li><li><b>${total_}</b> persone prenotate</li><li><b>${ncani}</b> prenotazioni con cani</li><li><b>${nseggiolini}</b> seggioloni richiesti</li></ul>`;\n      $('<p/>', { class: 'clearme', css: { padding: '' } }).html(summary).prependTo('#innerNotesDiv1');\n      if (notes.length > 0) {\n        $('<button/>', { class: 'clearme button small', css: { marginBottom: '3rem', marginTop: '0rem' } })\n          .prependTo('#innerNotesDiv2')\n          .text('Invia email di promemoria a clienti')\n          .off('click')\n          .on('click', () => {\n            showConsultaMessage(\n              '<p>Vuoi inviare email di promemoria della prenotazione ai clienti?</p>',\n              'giorno: ' + date,\n              () => mkCall(\n                'POST',\n                { action: 'promemoria', data: datetime },\n                res => {\n                  showMessage('Email di promemoria inviate ai clienti');\n                },\n                res => {\n                  showMessage(messageError);\n                }\n              ),\n              () => $('#close-modal').click(),\n              true,\n            );\n          });\n\n      }\n    },\n    res => {\n      showMessage(messageError);\n    }\n  );\n}\n\nfunction makeInterface (pid, dates) {\n  $('#infoDiv').hide();\n  $('#prenota').off('click').on('click', () => {\n    const d = fp.selectedDates[0];\n    d.setHours(12);\n    const data = {\n      date: d.toISOString(),\n      shiftId: $($('.aShift').filter((i, ii) => $(ii).attr('bselected') == 'true')[0]).attr('bindex'),\n      href: window.location.href,\n      cani: $('#cani').is(':checked'),\n      seggiolini: $('#seggiolini').val()\n    };\n    [\n      'name',\n      'surname',\n      'telephone',\n      'email',\n      'quantity',\n      'obs',\n    ].forEach(id => { data[id] = $(`#${id}`).val() });\n    validateData(data, validation).then(r => {\n      if (!r) return;\n      if (pid) { // user is modifying, cancel previous reservation:\n        data.oldID = pid.split('_')[0];\n      }\n      mkCall(\n        'POST',\n        { action: 'mkReservation', data },\n        res => {\n          if (res.reservationID2 === 'noPlacesLeft') {\n            return showMessage(`In questo turno siamo al completo.`);\n          }\n          let  u = window.location.href;\n          u = u[u.length - 1] == '/' ? u : (u.split('/').reverse().slice(1).reverse().join('/') + '/');\n          const url = u + 'consulta.html?id=' + res.reservationID2;\n          window.location.href = url + (pid ? '_modificata' : '');\n        },\n        res => {\n          showMessage(messageError);\n        }\n      );\n    });\n  });\n\n  // https://flatpickr.js.org/\n  const fp = $('#from').flatpickr({\n    locale: 'it',\n    minDate: 'today',\n    dateFormat:'Y-m-d',\n    disable: dates || [],\n    disableMobile: true,\n    onChange: (dp, input) => {\n      $('#loading').show();\n      fp.close();\n      dp[0].setHours(12);\n      updateShifts(dp[0]);\n    },\n  });\n  fp.set('dateFormat', 'd/M/Y');\n  // $('#privacy2').on('click', () => {\n  //   showMessage();\n  // });\n\n  //form validation\n  const validation = new JustValidate('#form')\n    .addField('#name', [\n      {\n        rule: 'required',\n        errorMessage: 'inserisci un nome'\n      }\n    ])\n    .addField('#surname', [\n      {\n        rule: 'required',\n        errorMessage: 'inserisci un cognome'\n      }\n    ])\n    .addField('#telephone', [\n      {\n        rule: 'required',\n        errorMessage: 'inserisci un telefono'\n      }\n    ])\n    .addField('#from', [\n      {\n        rule: 'required',\n        errorMessage: 'scegli una data'\n      }\n    ])\n    .addField('#quantity', [\n      {\n        rule: 'required',\n        errorMessage: 'scegli il numero di persone'\n      }\n    ])\n    .addField('#privacy', [\n      {\n        rule: 'required',\n        errorMessage: 'è necessario accettare l\\'Informativa sulla privacy'\n      }\n    ])\n    .addField('#shiftGridL', [\n      {\n        rule: 'required',\n        errorMessage: 'seleziona il turno',\n        validator: () => {\n          const shiftId = $($('.aShift').filter((i, ii) => $(ii).attr('bselected') == 'true')[0]).attr('bindex');\n          const res = shiftId !== undefined;\n          return res;\n        }\n      }\n    ])\n    .addField('#email', [\n      {\n        rule: 'required',\n        errorMessage: 'inserisci un\\'email',\n      },\n      {\n        rule: 'email',\n        errorMessage: 'L\\'email non è valida!',\n      },\n    ]);\n  return fp;\n}\n\nconst weekdays = ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'];\nfunction updateShifts (dp, selected, people) {\n  $('.bShift').remove();\n  const data = {\n    day: dp.getDate(),\n    month: dp.getMonth(),\n    year: dp.getYear() + 1900\n  };\n  mkCall(\n    'POST',\n    { action: 'getShifts', data },\n    res => {\n      const pad0 = i => String(i).padStart(2, '0');\n      const d = `${data.year}-${pad0(data.month + 1)}-${pad0(data.day)}`;\n      const wd = weekdays[dp.getDay()];\n      const shifts_ = res.shifts.filter(s => (s.end_period >= d) && (s.start_period <= d) && (s.weekdays_period.includes(wd)));\n      if (shifts_.length === 0)\n        return showMessage(`<p>Nei mesi da Settembre a Maggio siamo aperti dal Giovedì alla Domenica.</p><p>Per richieste puoi inviarci una email a ${emailString}</p><p>Grazie</p>`);\n      const shifts = mkShiftButtons(shifts_, selected);\n      mkQuantityOptions(shifts, people);\n    },\n    res => showMessage(messageError)\n  );\n}\n\nfunction mkShiftButtons (shifts, selected) {\n  const sButtons = [];\n  const removeShifts = [];\n  shifts.forEach((s, i) => {\n    const max_available = s.online_seats_limit - s.booked_seats_in_shift;\n    if (max_available <= 0) {\n      return removeShifts.push(i);\n    }\n    for (const table in s.tables) {\n      if (s.tables[table] > max_available) {\n        delete s.tables[table];\n      }\n    }\n    s.table_sizes = Object.values(s.tables);\n    if (s.table_sizes.length === 0) {\n      return removeShifts.push(i);\n    }\n    const id = 'aShift' + i;\n    s.bid = '#' + id;\n    const b = $('<a/>', { id, class: 'button aShift' })\n      .text(s.name)\n      .appendTo(\n        $('<div/>', { class: 'cell  bShift' })\n          .appendTo('#shiftGrid')\n      );\n    b.bcolor = b.css('background-color');\n    b.attr('bindex', s.id);\n    sButtons.push(b);\n  });\n  removeShifts.reverse().forEach(i => shifts.splice(i, 1));\n  if (shifts.length === 0)\n      showMessage('In questa data siamo al completo.');\n  sButtons.forEach(b => {\n    b.click(() => {\n      sButtons.forEach(bb => {\n        bb.attr('bselected', false);\n        if (bb.css('pointer-events') !== 'none')\n          bb.css('background', bb.bcolor);\n      });\n      b.css('background', '#18813B');\n      b.attr('bselected', true);\n    });\n  });\n  if (selected) {\n    $($('.aShift').filter((i, ii) => $(ii).attr('bindex') == selected)[0]).click();\n  }\n  return shifts;\n}\n\nfunction showReservation (pid) {\n  $('#new').hide();\n  $('.form').hide();\n  $('#prenotaDiv').show();\n  let modified = false;\n  if (pid.endsWith('_modificata')) {\n    $('#ttitle').text('Prenotazione Modificata. Grazie');\n    $('#tlegend').text('Dettaglio prenotazione modificata');\n    pid = pid.split('_modifica')[0];\n  }\n  mkCall(\n    'POST',\n    { action: 'getReservation', data: pid },\n    res => {\n      if (res.booking === null) {\n        $('#yes').hide();\n        $('#no').hide();\n        return showConsultaMessage('Prenotazione non trovata.', `Se non hai cancellato la prenotazione in precedenza, puoi scriverci una email a ${emailString} o chiamarci al numero ${telString} per chiarimenti.`);\n      }\n      presentReservation(res.booking);\n    },\n   //se ti serve tienilo, ma nascondilo a tutti gli altri. non è user friendly e se un cliente ci chiama e ci da il pid noi non sappiamo cosa rispondere...\n    res => {\n      showMessage(`${messageErrorAlreadyCancelled}\n        La ID della prenotazione è: ${pid}.`);\n    }\n  );\n}\n\n\n\nfunction presentReservation (r) {\n  if ((!r) || 'error' in r) return bookingNotFound();\n  // $('#ttitle').text('La tua Prenotazione :-)');\n  const bc = r.booking_customer;\n  const extra = loadExtra(r);\n\n  // const date = new Date(r.booked_for);\n  // const date2 = new Date(date.getTime() + r.duration * 60000);\n  const { date, date2 } = getBookingTimes(r);\n\n  const h = (id, info) => $('#' + id).text(info);\n  h('name', bc.first_name + ' ' + bc.last_name);\n  h('telephone', extra.telephone);\n  h('email', extra.email);\n  h('day', date.toLocaleString('it-IT', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' }));\n  h('time1', time(date));\n  h('time2', time(date2));\n  h('people', r.people);\n  h('note', extra.note);\n  const s = extra.seggiolini;\n  h('segg', s == 0 ? 'No' : s);\n  h('dog', extra.cani ? 'Sì' : 'No');\n  $('#modify').click(() => {\n    const pid = new URL(window.location.href).searchParams.get('id').split('_modificata')[0] + '_modifica';\n    window.location.href = window.location.href.split('/').reverse().slice(1).reverse().join('/') + '/riserva-un-tavolo.html?id=' + pid;\n  });\n  const pid = r.id;\n  $('#cancel').click(() => {\n    showConsultaMessage(\n      'Vuoi cancellare la prenotazione?',\n      '',\n      () => {\n        $('#close-modal').click();\n        mkCall(\n          'POST',\n          { action: 'cancelReservation', data: pid },\n          res => {\n            $('#ttitle').text('Prenotazione Cancellata. Grazie');\n            $('#tlegend').text('Dettaglio prenotazione cancellata ');\n            $('#modify').hide();\n            $('#cancel').hide();\n            $('#new').show();\n          },\n          res => {\n            showMessage(`${messageError}\n              La ID della prenotazione è: ${pid}.`);\n          }\n        );\n      },\n      () => {\n        $('#close-modal').click();\n      }\n    );\n  });\n}\n\nfunction validateEmail (email) {\n  return email.match(\n    /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n  );\n};\n\nfunction validateData (data, validation) {\n  return validation.revalidate().then(() => {\n    // $('.error').attr('style', 'border: solid 1px #ccc');\n    // $('.error1').hide()\n    // $('#notification').hide();\n    const messages = [];\n    const ids = [];\n    if (!$('#from').val()) {\n      ids.push('#from');\n    }\n    if (data.date === '') {\n      ids.push('#from1');\n    }\n    if (data.quantity == 0) {\n      ids.push('#quantity1');\n    }\n    if (data.shiftId === undefined) {\n      ids.push('#shiftGrid1');\n    }\n    if (data.name === '') {\n      ids.push('#name1');\n    }\n    if (data.surname === '') {\n      ids.push('#surname1');\n    }\n    if (!validateEmail(data.email)) {\n      ids.push('#email1');\n    }\n    if (data.telephone === '') {\n      ids.push('#telephone1');\n    }\n    if (!$('#privacy').prop('checked')) {\n      ids.push('#privacy3');\n    }\n    if (ids.length > 0) {\n      ids.forEach(i => showError(i));\n      // asdoiajds = aosidjasid\n      // showMessage(messages.join('<br>'));\n      return false;\n    }\n    return true;\n  });\n}\n\nfunction showMessage (message) {\n  $('#modalLead').html(message);\n  var popup = new Foundation.Reveal($('#myModal'));\n  popup.open();\n}\n\nconst telString = '<a href=\"tel:+390718853384\"><span itemprop=\"telephone\"> 071&nbsp;8853384</span></a>';\n\nconst emailString = '<a href=\"mailto:info@beerstrot.it?subject=Problema&nbsp;Prenotazione\">info@beerstrot.it</a>';\n\nconst message10 = `Per <b>13 o più persone</b>, vi preghiamo di contattarci tramite ${emailString} o telefonarci al numero ${telString}`;\n\n/*const messageError = `Si prega di riprovare perché abbiamo riscontrato un errore.<br>\nSe il problema persiste, ti consigliamo di \nentrare nel ${emailString} o di chiamare ${telString}.<br>`;*/\n\nconst messageError = `<h2>Il Server non è raggiungibile</h2><p>Riprova fra qualche istante e assicurati di avere campo nel cellulare o internet funzionante da computer. Grazie.</p><ul class=\"no-bullet\"><li>Se il problema persiste:</li><ul><li>Invia una email a ${emailString}</li><li>Chiamaci al numero ${telString}</li></ul></li></ul>`;\n\n//const messageErrorAlreadyCancelled = `<h2>Prenotazione non trovata</h2><ul class=\"no-bullet\"><li>Se non hai cancellato la prenotazione in precedenza, per chiarimenti puoi:</li><ul><li>Scriverci una email a ${emailString}</li><li>Chiamarci al numero ${telString}</li></ul></li></ul><p>Grazie</p>`;\n\nfunction bookingNotFound () {\n  const div = $('#innerInfoDiv');\n  const fs = $('<fieldset/>').appendTo(div);\n  $('<legend/>').text('Prenotazione non trovata').appendTo(fs);\n  $('<div/>').html(`<p>Ti chiediamo gentilmente di contattarci.</p>`).appendTo(fs);\n  $('<div/>').html(telString).appendTo(fs);\n  $('<div/>').html(emailString).appendTo(fs);\n  $('#buttonInfoDiv').hide();\n}\n\nfunction showNotesMessage (msg) {\n  $('<p/>', { class: 'clearme', css: { background: '', padding: '' } }).html(msg).appendTo('#notesDiv3');\n  $('#innerNotesDiv').hide();\n}\n\nfunction showConsultaMessage (message, message2, callYes, callNo, index) {\n  $('#yes').off('click').on('click', callYes);\n  $('#no').off('click').on('click', callNo);\n  $('#modalLead2').html(message);\n  $('#modalText').html(message2);\n  var $modal = new Foundation.Reveal($('#myModal' + (index ? '2' : '')));\n  $modal.open();\n}\n\nfunction mkQuantityOptions (shifts, people) {\n  // find biggest table\n  const biggestTable = shifts.reduce((m, s) => Math.max(m, ...s.table_sizes), 0);\n  // make options reaching it\n  $('.aquantity').remove();\n  [...Array(biggestTable).keys()]\n    .forEach(i => {\n      $('<option/>', { value: i + 1, class: 'aquantity' })\n        .text(i + 1).appendTo('#quantity');\n    });\n  $('#quantity').prop('disabled', false)\n  // enable select\n  const cssOn = { 'pointer-events': '', cursor: 'pointer', background: '#00687E' };\n  const cssOff = { 'pointer-events': 'none', cursor: 'default', background: 'rgba(0,104,126, 0.2)' };\n  $('#quantity').off('input').on('input', function() {\n    const v = Number($(this).val());\n    shifts.forEach((s, i) => {\n      const tablesOk = s.table_sizes.filter(t => t >= v);\n      const css = tablesOk.length === 0 ? cssOff : cssOn;\n      $(s.bid).css(css).attr('bselected', false);\n    });\n    // should not happen because if a quantity is available\n    // there is a shift with a table for it:\n    const totalDisabled = shifts.reduce((c, ss) => {\n      const isDisabled =  $(ss.bid).css('pointer-events') === 'none';\n      return c + isDisabled;\n    }, 0); \n    if (totalDisabled === shifts.length) return showMessage(message10);\n    $('#notification').hide();\n  });\n  if (people) {\n    $('#quantity').val(people);\n  }\n}\n\nfunction showError (id) {\n  $(id.replace('1', '')).attr('style', 'border: 1px solid red !important');\n}\n\nconst time = d => d.toLocaleString('it-IT', { hour: '2-digit', minute:'2-digit' });\nfunction getBookingTimes (b, timed) {\n  const date = new Date(b.booked_for);\n  const date2 = new Date(date.getTime() + b.duration * 60000);\n  if (timed) {\n    return { t: time(date), t2: time(date2) };\n  }\n  return { date, date2 };\n}\n"],"names":["bana","mkCall","testeLambda","$","document","ready","url","URL","window","location","href","pid","searchParams","get","showNotes","showDays","endsWith","makeInterface_","showReservation","action","data","res","pid_","split","fp","makeInterface","dates","modifyReservation","undefined","showMessage","messageError","loadExtra","booking","e","JSON","parse","extra","text","insertAfter","b","bc","booking_customer","date","Date","booked_for","setDate","prop","val","people","updateShifts","shift_id","note","seggiolini","cani","first_name","last_name","email","telephone","datetime","hide","show","css","r","html","join","flatpickr","minDate","locale","dateFormat","disableMobile","onChange","dp","input","setHours","toggleDate","date_","toLocaleString","weekday","year","month","day","showConsultaMessage","toISOString","click","remove","tables","rooms","forEach","t","id","name","shifts","reduce","a","i","bookings","obookings","anon","nbookings","length","showNotesMessage","nseggiolini","ncani","notes","ii","n","push","notes_","s","Number","c","Boolean","table","table_id","time","hour","minute","seg","sort","tr","class","appendTo","sentences","total_","k","people_online","ss","people_hand","total","getBookingTimes","t2","summary","padding","prependTo","marginBottom","marginTop","off","on","d","selectedDates","shiftId","filter","attr","is","validateData","validation","then","oldID","reservationID2","u","reverse","slice","disable","close","set","JustValidate","addField","rule","errorMessage","validator","weekdays","selected","getDate","getMonth","getYear","pad0","String","padStart","wd","getDay","shifts_","end_period","start_period","weekdays_period","includes","emailString","mkShiftButtons","mkQuantityOptions","sButtons","removeShifts","max_available","online_seats_limit","booked_seats_in_shift","table_sizes","Object","values","bid","bcolor","splice","bb","modified","telString","presentReservation","messageErrorAlreadyCancelled","bookingNotFound","date2","h","info","validateEmail","match","revalidate","messages","ids","quantity","surname","showError","message","popup","Foundation","Reveal","open","message10","div","fs","msg","background","message2","callYes","callNo","index","$modal","biggestTable","m","Math","max","Array","keys","value","cssOn","cursor","cssOff","v","tablesOk","totalDisabled","isDisabled","replace","timed","getTime","duration"],"sourceRoot":""}