{"version":3,"file":"src_assets_js_orari_js.js","mappings":";;;;;;;;;;;;;;;;;;;;AAAkC;AAElCC,CAAC,CAACC,QAAQ,CAAC,CAACC,KAAK,CAAC,YAAM;EACtBC,kBAAkB,EAAE;AACtB,CAAC,CAAC;AAEF,SAASC,QAAQ,GAAI;EACnB,IAAMC,KAAK,GAAGL,CAAC,CAAC,aAAa,CAAC;EAC9B,IAAMM,IAAI,GAAGN,CAAC,CAAC,YAAY,CAAC;EAC5BK,KAAK,CAACE,IAAI,CAAC,YAAY;IACrB,IAAMC,IAAI,GAAGR,CAAC,CAAC,IAAI,CAAC;IACpBQ,IAAI,CAACC,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC;IAC5B,IAAMC,IAAI,GAAGF,IAAI,CAACE,IAAI,EAAE;IACxB,IAAIC,SAAS,GAAG,CAACC,MAAM,CAACC,eAAe,CAACC,GAAG,CAACJ,IAAI,CAAC;IACjD,IAAIC,SAAS,EAAE;MACbH,IAAI,CAACC,IAAI,CAAC,OAAO,EAAE,2BAA2B,CAAC;IACjD,CAAC,MAAM;MACLD,IAAI,CAACC,IAAI,CAAC,OAAO,EAAE,6BAA6B,CAAC;IACnD;IACAD,IAAI,CAACO,EAAE,CAAC,OAAO,EAAE,YAAM;MACrBJ,SAAS,GAAG,CAACA,SAAS;MACtB,IAAIA,SAAS,EAAE;QACbH,IAAI,CAACC,IAAI,CAAC,OAAO,EAAE,2BAA2B,CAAC;QAC/CH,IAAI,CAACU,IAAI,WAAIN,IAAI,aAAU;QAC3BE,MAAM,CAACC,eAAe,CAACI,MAAM,CAACP,IAAI,CAAC;MACrC,CAAC,MAAM;QACLF,IAAI,CAACC,IAAI,CAAC,OAAO,EAAE,6BAA6B,CAAC;QACjDH,IAAI,CAACU,IAAI,WAAIN,IAAI,aAAU;QAC3BE,MAAM,CAACC,eAAe,CAACK,GAAG,CAACR,IAAI,CAAC;MAClC;IACF,CAAC,CAAC;EACJ,CAAC,CAAC;EACFV,CAAC,CAAC,WAAW,EAAE;IAAEmB,IAAI,EAAE,QAAQ;IAAEC,KAAK,EAAE;EAAqB,CAAC,CAAC,CAC5DJ,IAAI,CAAC,gBAAgB,CAAC,CACtBK,QAAQ,CAACrB,CAAC,CAAC,cAAc,CAAC,CAAC,CAC3Be,EAAE,CAAC,OAAO,EAAE,YAAM;IACjBO,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;IAC7BjB,IAAI,CAACU,IAAI,CAAC,iCAAiC,GAAG,WAAIQ,KAAK,qBAAIZ,MAAM,CAACC,eAAe,GAAEY,IAAI,CAAC,IAAI,CAAC,CAAC;IAC9F1B,8CAAM,CACJ,MAAM,EACN;MAAE2B,MAAM,EAAE,sBAAsB;MAAEC,IAAI,aAAMH,KAAK,qBAAIZ,MAAM,CAACC,eAAe;IAAE,CAAC,EAC9E,UAAAe,GAAG,EAAI;MACLhB,MAAM,CAACiB,KAAK,CAAC,0BAA0B,CAAC;MACxCP,OAAO,CAACC,GAAG,CAAC;QAAEK,GAAG,EAAHA;MAAI,CAAC,CAAC;IACtB,CAAC,EACD,UAAAA,GAAG,EAAI;MACL;MACAE,WAAW,CAACC,YAAY,CAAC;IAC3B,CAAC,CACF;EACH,CAAC,CAAC;AACN;AAEA,SAAS5B,kBAAkB,GAAI;EAC7BJ,8CAAM,CACJ,MAAM,EACN;IAAE2B,MAAM,EAAE,oBAAoB;IAAEC,IAAI,EAAE;EAAK,CAAC,EAC5C,UAAAC,GAAG,EAAI;IACLhB,MAAM,CAACC,eAAe,GAAG,IAAImB,GAAG,CAACJ,GAAG,CAAC;IACrCxB,QAAQ,EAAE;EACZ,CAAC,EACD,UAAAwB,GAAG,EAAI;IACL;IACAE,WAAW,CAACC,YAAY,CAAC;EAC3B,CAAC,CACF;AACH","sources":["webpack://foundation-zurb-template/./src/assets/js/orari.js"],"sourcesContent":["import {  mkCall } from './utils';\n\n$(document).ready(() => {\n  getClosedTimeslots();\n});\n\nfunction setOrari () {\n  const cells = $('.orario-btn');\n  const info = $('#last-time');\n  cells.each(function () {\n    const cell = $(this);\n    cell.attr('disabled', false);\n    const text = cell.text();\n    let isEnabled = !window.closedTimeslots.has(text)\n    if (isEnabled) {\n      cell.attr('class', 'button orario-btn primary')\n    } else {\n      cell.attr('class', 'button orario-btn secondary')\n    }\n    cell.on('click', () => {\n      isEnabled = !isEnabled;\n      if (isEnabled) {\n        cell.attr('class', 'button orario-btn primary')\n        info.html(`${text} aperto`);\n        window.closedTimeslots.delete(text);\n      } else {\n        cell.attr('class', 'button orario-btn secondary')\n        info.html(`${text} chiuso`);\n        window.closedTimeslots.add(text);\n      }\n    });\n  });\n  $('<button/>', { type: 'button', class: 'button extra-space' })\n    .html('Chiudi Asporti')\n    .appendTo($('#consolidate'))\n    .on('click', () => {\n      console.log('send to server');\n      info.html('orari chiusura asporti attivi: ' + new Array(...window.closedTimeslots).join(', '));\n      mkCall(\n        'POST',\n        { action: 'consolidateTimeslots', data: new Array(...window.closedTimeslots) },\n        res => {\n          window.alert('Orari Asporti Aggiornati');\n          console.log({ res });\n        },\n        res => {\n          // TODO: add this show message modal\n          showMessage(messageError);\n        }\n      );\n    });\n}\n\nfunction getClosedTimeslots () {\n  mkCall(\n    'POST',\n    { action: 'getClosedTimeslots', data: '--' },\n    res => {\n      window.closedTimeslots = new Set(res);\n      setOrari();\n    },\n    res => {\n      // TODO: add this show message modal\n      showMessage(messageError);\n    }\n  );\n}\n"],"names":["mkCall","$","document","ready","getClosedTimeslots","setOrari","cells","info","each","cell","attr","text","isEnabled","window","closedTimeslots","has","on","html","delete","add","type","class","appendTo","console","log","Array","join","action","data","res","alert","showMessage","messageError","Set"],"sourceRoot":""}