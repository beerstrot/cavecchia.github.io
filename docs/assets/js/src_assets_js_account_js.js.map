{"version":3,"file":"src_assets_js_account_js.js","mappings":"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","sources":["webpack://foundation-zurb-template/./src/assets/js/account.js","webpack://foundation-zurb-template/./src/assets/js/htmlTemplates.js"],"sourcesContent":["import { mkCall } from './utils';\nimport { carrelloCheckoutUser } from './htmlTemplates';\n\n$(document).ready(() => {\n  window.user = JSON.parse(window.localStorage.currentClient);\n  $('#logout-btn').on('click', () => {\n    delete window.localStorage.currentClient;\n    window.location.href = '/index.html'\n  });\n  setUserData();\n  setUpdate();\n  setPreviousOrders();\n});\n\nfunction setUserData () {\n  ['name', 'surname', 'email', 'telephone'].forEach(i => $(`#${i}-m`).val(window.user[i]));\n  $('#newsletter-m').prop('checked', user.newsletter);\n  $('#ttitle').html(`Ciao ${user.name}`);\n}\n\nfunction setUpdate () {\n  $('#update-usr-btn').on('click', () => {\n    const data = {};\n    const get = id => {\n      data[id] = $(`#${id}-m`).val();\n    }\n    console.log('click make me');\n    ['name', 'surname', 'telephone', 'email'].forEach(i => get(i));\n    data.newsletter = $('#newsletter').is(\":checked\");\n    mkCall(\n      'POST',\n      { action: 'updateClient', data },\n      res => {\n        console.log({ res });\n        ['name', 'surname', 'telephone', 'email'].forEach(i => { window.user[i] = $(`#${i}-m`).val() });\n        window.localStorage.currentClient = JSON.stringify(window.user);\n        window.location.href = '/account.html';\n      },\n      res => {\n        // TODO: add this show message modal\n        showMessage(messageError);\n      }\n    );\n  });\n}\n\nfunction setPreviousOrders () {\n  const mesi = 'gennaio, febbraio, marzo, aprile, maggio, giugno, luglio, agosto, settembre, ottobre, novembre, dicembre'.split(', ');\n  // const temp = carrelliCheckoutUser(user.orders);\n  user.orders.forEach((order, count) => {\n    const d = new Date(order.deliver_at);\n    const title = `Ordine del ${d.getDate()} ${mesi[d.getMonth()]} ${d.getFullYear()}`;\n    const li = $('<li/>', { class: 'accordion-item ordine-salvato-item', 'data-accordion-item': true }).appendTo($('#carrelli-accordion'));\n    $('<a/>', { class: 'accordion-title', href: '#order-' + count })\n      .html(title).appendTo(li);\n    const temp = carrelloCheckoutUser(order.order_items, count);\n    $('<div/>', { class: 'accordion-content ordine-salvato-content clearfix', 'data-tab-content': true, id: 'order-' + count }).appendTo(li).html(temp);\n    $('#remove-' + count).hide();\n    $('#load-' + count).hide();\n  });\n  // const li = $('<li/>', { class: 'accordion-item ordine-salvato-item', 'data-accordion-item': true }).appendTo($('#carrelli-accordion'));\n  // $('<a/>', { class: 'accordion-title', href: '#dummy' }).html('ordine dummy').appendTo(li);\n  // $('<div/>', { class: 'accordion-content ordine-salvato-content clearfix', 'data-tab-content': true, id: 'dummy' }).appendTo(li).html('AOSIDJASOISDJ');\n}\n","const itemsCarrelloTable = (name, note, cottura, quantity, price, pid) => {\n  return `\n            <tr id=\"carrello-row-${pid}\">\n                <td>\n                    <span class=\"titolo-item\">${name}</span>\n                    <span class=\"note-item\">${note}</span>\n                    <span class=\"cottura-item\">${cottura}</span>\n                </td>\n                <td>\n                    <div class=\"input-group input-number-group\">\n                        <div class=\"input-group-button hide\">\n                            <span class=\"input-number-decrement\"><i class=\"las la-minus-square la-lg\"></i></span>\n                        </div>\n                        <input class=\"input-number\" style=\"width:1.5rem; font-size: 0.8rem!important;\" type=\"button\" value=\"${quantity}\" min=\"0\" max=\"30\">\n                        <div class=\"input-group-button hide\">\n                            <span class=\"input-number-increment\"><i class=\"las la-plus-square la-lg\"></i></span>\n                        </div>\n                    </div>\n                </td>\n                <td>\n                    <span class=\"prezzo-item\">€ ${price}</span>\n                </td>\n            </tr>\n`;\n};\n\nconst itemsCarrelloCheckout = (name, note, cottura, quantity, price) => {\n  return `\n  \t<div class=\"checkout-summary-item align-middle\">\n\t\t<div class=\"item-name\">\n\t  \t\t<h1 class=\"titolo-item\">${name}</h1>\n            <p class=\"note-item\">${note}</p>\n            <p class=\"cottura-item\">${cottura}</p>\n\t  \t\t<p class=\"note-item\">Quantità: ${quantity}</p>\n\t\t</div>\n        <div class=\"item-price\">\n            <p class=\"prezzo-item \">€ ${price}</p>\n        </div>\n  \t</div>\n`\n};\n\nconst carrelloCheckoutUser = (carrello, count) => {\n  let total = 0;\n  const prods = [];\n  carrello.forEach(prod => {\n    total += parseFloat(prod.final_price);\n    const cottura = prod.variations ? prod.variations[0].value : '';\n    prods.push(\n      carrelloProd(\n        prod.name,\n        prod.notes,\n        cottura,\n        prod.quantity,\n        prod.final_net_price\n      )\n    );\n  });\n  return `\n<div class=\"clearfix\">\n  <div id=\"itens-carrello-checkout\">\n    ${prods.join('\\n')}\n  </div>\n  \t<div class=\"checkout-summary-details\">\n\t    <div>\n\t      \t<h1 class=\"titolo-item\">TOTALE:</h1>\n\t    </div>\n\t    <div class=\"item-price\">\n\t      \t<h1 class=\"titolo-item\" id=\"checkout-total\">€ ${total.toLocaleString()}</h1>\n\t    </div>\n\t</div>\n    <button type=\"button\" id=\"remove-${count}\" class=\"clear button hollow alert float-left\">Elimina</button>\n    <button type=\"button\" id=\"load-${count}\" class=\"button submit float-right\" hidden>Metti nel carrello e modifica</button>\n</div>\n`\n};\n\nconst carrelloProd = (name, notes, cottura, quantity, price) => {\n  return `\n<div class=\"checkout-summary-item align-middle\">\n  <div class=\"item-name\">\n    <h1 class=\"titolo-item\">${name}</h1>\n    <p class=\"note-item\">${notes}</p>\n    <p class=\"cottura-item\">${cottura}</p>\n    <p class=\"note-item\">Quantità: ${quantity}</p>\n  </div>\n  <div class=\"item-price\">\n    <p class=\"prezzo-item \">€ ${price}</p>\n  </div>\n</div>\n`\n\n}\n\nexport { itemsCarrelloTable, itemsCarrelloCheckout, carrelloCheckoutUser };\n"],"names":["mkCall","carrelloCheckoutUser","$","document","ready","window","user","JSON","parse","localStorage","currentClient","on","location","href","setUserData","setUpdate","setPreviousOrders","forEach","i","val","prop","newsletter","html","name","data","get","id","console","log","is","action","res","stringify","showMessage","messageError","mesi","split","orders","order","count","d","Date","deliver_at","title","getDate","getMonth","getFullYear","li","class","appendTo","temp","order_items","hide","itemsCarrelloTable","note","cottura","quantity","price","pid","itemsCarrelloCheckout","carrello","total","prods","prod","parseFloat","final_price","variations","value","push","carrelloProd","notes","final_net_price","join","toLocaleString"],"sourceRoot":""}