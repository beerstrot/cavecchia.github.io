{"version":3,"file":"src_assets_js_account_js.js","mappings":"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","sources":["webpack://foundation-zurb-template/./src/assets/js/account.js","webpack://foundation-zurb-template/./src/assets/js/htmlTemplates.js"],"sourcesContent":["import { mkCall, ORIGIN } from './utils';\nimport { carrelloCheckoutUser } from './htmlTemplates';\n\n$(document).ready(() => {\n  if (window.localStorage.currentClient)\n    window.user = JSON.parse(window.localStorage.currentClient);\n  else window.location.href = '/#signup-login'\n  $('#logout-btn').on('click', () => {\n    delete window.localStorage.currentClient;\n    window.location.href = '/'\n  });\n  setUserData();\n  setUpdate();\n  setPreviousOrders();\n});\n\nfunction setUserData () {\n  ['name', 'surname', 'email', 'telephone'].forEach(i => $(`#${i}-m`).val(window.user[i]));\n  $('#newsletter-m').prop('checked', user.newsletter);\n  $('#ttitle').html(`Ciao ${user.name}`);\n}\n\nfunction setUpdate () {\n  $('#update-usr-btn').on('click', () => {\n    const data = {};\n    const get = id => {\n      data[id] = $(`#${id}-m`).val();\n    }\n    ['name', 'surname', 'telephone', 'email'].forEach(i => get(i));\n    data.newsletter = $('#newsletter-m').is(\":checked\");\n    mkCall(\n      'POST',\n      { action: 'updateClient', data },\n      res => {\n        ['name', 'surname', 'telephone', 'newsletter'].forEach(i => { window.user[i] = res.Attributes[i] });\n        setUserData();\n        window.localStorage.currentClient = JSON.stringify(window.user);\n      },\n      res => {\n        // TODO: add this show message modal\n        showMessage(messageError);\n      }\n    );\n  });\n}\n\nfunction setPreviousOrders () {\n  const mesi = 'gennaio, febbraio, marzo, aprile, maggio, giugno, luglio, agosto, settembre, ottobre, novembre, dicembre'.split(', ');\n  // const temp = carrelliCheckoutUser(user.orders);\n  user.orders.forEach((order, count) => {\n    const d = new Date(order.deliver_at);\n    const title = `Ordine del ${d.getDate()} ${mesi[d.getMonth()]} ${d.getFullYear()}`;\n    const li = $('<li/>', { class: 'accordion-item ordine-salvato-item', 'data-accordion-item': true }).appendTo($('#carrelli-accordion'));\n    $('<a/>', { class: 'accordion-title', href: '#order-' + count })\n      .html(title).appendTo(li);\n    const temp = carrelloCheckoutUser(order.order_items, count);\n    $('<div/>', { class: 'accordion-content ordine-salvato-content clearfix', 'data-tab-content': true, id: 'order-' + count }).appendTo(li).html(temp);\n    $('#remove-' + count).show();\n    $('#load-' + count).show();\n    $('#load-' + count).on('click', () => loadPreviousOrder(count));\n  });\n  // const li = $('<li/>', { class: 'accordion-item ordine-salvato-item', 'data-accordion-item': true }).appendTo($('#carrelli-accordion'));\n  // $('<a/>', { class: 'accordion-title', href: '#dummy' }).html('ordine dummy').appendTo(li);\n  // $('<div/>', { class: 'accordion-content ordine-salvato-content clearfix', 'data-tab-content': true, id: 'dummy' }).appendTo(li).html('AOSIDJASOISDJ');\n}\n\nfunction loadPreviousOrder(indexID) {\n  let data = {\n    \"email\": window.user.email,\n    \"order_index\": indexID\n  };\n  mkCall(\n    'POST',\n    { action: 'loadPreviousOrder', data },\n    res => {\n      if (res.result) {\n        if (res.details.unavailable_items.length > 0) {\n          let missingProducts = ''\n          for (let unavailableItem of res.details.unavailable_items)\n            missingProducts += unavailableItem + '\\n';\n          alert(\"I seguenti prodotti non sono più disponibili:\\n\" + missingProducts);\n        }\n        window.localStorage.currentOrder = JSON.stringify(res.details.available_items);\n        window.location.href = ORIGIN + '/checkout.html'\n      }\n      else\n        console.log(res.details);\n    },\n    err => {\n      // TODO: add this show message modal\n      alert('Qualcosa è andato storto. Contattaci al numero  071 8853384 oppure inviaci una email a info@beerstrot.it. Grazie');\n    }\n  );\n}\n","const itemsCarrelloTable = (name, note, cottura, quantity, price, pid) => {\n  return `\n            <tr class=\"carrello-row-${pid}\">\n                <td>\n                    <span class=\"titolo-item\">${name}</span>\n                    <span class=\"note-item\">${note}</span>\n                    <span class=\"cottura-item\">${cottura}</span>\n                </td>\n                <td>\n                    <div class=\"input-group input-number-group\">\n                        <div class=\"input-group-button\">\n                            <span id=\"input-number-decrement-${pid}\" class=\"input-number-decrement input-number-decrement-${pid}\"><i class=\"las la-minus-square la-lg\"></i></span>\n                        </div>\n                        <input class=\"input-number\" style=\"width:1.5rem; font-size: 0.8rem!important;\" type=\"button\" value=\"${quantity}\" min=\"0\" max=\"30\">\n                        <div class=\"input-group-button\">\n                            <span id=\"input-number-increment-${pid}\" class=\"input-number-increment input-number-increment-${pid}\"><i class=\"las la-plus-square la-lg\"></i></span>\n                        </div>\n                    </div>\n                </td>\n                <td>\n                    <span class=\"prezzo-item\">€&thinsp;<span class=\"prezzo-item-${pid}\">${price}</span></span>\n                </td>\n            </tr>\n`;\n};\n\nconst itemsCarrelloCheckout = (name, note, cottura, quantity, price) => {\n  return `\n  \t<div class=\"checkout-summary-item align-middle\">\n\t\t<div class=\"item-name\">\n\t  \t\t<h1 class=\"titolo-item\">${name}</h1>\n            <p class=\"note-item\">${note}</p>\n            <p class=\"cottura-item\">${cottura}</p>\n\t  \t\t<p class=\"note-item\">Quantità: ${quantity}</p>\n\t\t</div>\n        <div class=\"item-price\">\n            <p class=\"prezzo-item\">€&thinsp;${price}</p>\n        </div>\n  \t</div>\n`\n};\n\nconst carrelloCheckoutUser = (carrello, count) => {\n  let total = 0;\n  const prods = [];\n  carrello.forEach(prod => {\n    total += parseFloat(prod.final_price);\n    const cottura = prod.variations ? prod.variations[0].value : '';\n    prods.push(\n      carrelloProd(\n        prod.name,\n        prod.notes,\n        cottura,\n        prod.quantity,\n        prod.final_net_price\n      )\n    );\n  });\n  return `\n<div class=\"clearfix\">\n  <div id=\"itens-carrello-checkout\">\n    ${prods.join('\\n')}\n  </div>\n  \t<div class=\"checkout-summary-details\">\n\t    <div>\n\t      \t<h1 class=\"titolo-item\">TOTALE:</h1>\n\t    </div>\n\t    <div class=\"item-price\">\n\t      \t<h1 class=\"titolo-item\" id=\"checkout-total\">€&ensp;${total.toLocaleString(undefined, { maximumFractionDigits: 2, minimumFractionDigits: 2})}</h1>\n\t    </div>\n\t</div>\n    <button type=\"button\" id=\"remove-${count}\" class=\"clear button hollow alert float-left\">Elimina</button>\n    <button type=\"button\" id=\"load-${count}\" class=\"button submit float-right\" hidden>Metti nel carrello e modifica</button>\n</div>\n`\n};\n\nconst carrelloProd = (name, notes, cottura, quantity, price) => {\n  return `\n<div class=\"checkout-summary-item align-middle\">\n  <div class=\"item-name\">\n    <h1 class=\"titolo-item\">${name}</h1>\n    <p class=\"note-item\">${notes}</p>\n    <p class=\"cottura-item\">${cottura}</p>\n    <p class=\"note-item\">Quantità: ${quantity}</p>\n  </div>\n  <div class=\"item-price\">\n    <p class=\"prezzo-item \">€ &thinsp;${price}</p>\n  </div>\n</div>\n`\n\n}\n\nexport { itemsCarrelloTable, itemsCarrelloCheckout, carrelloCheckoutUser };\n"],"names":["mkCall","ORIGIN","carrelloCheckoutUser","$","document","ready","window","localStorage","currentClient","user","JSON","parse","location","href","on","setUserData","setUpdate","setPreviousOrders","forEach","i","val","prop","newsletter","html","name","data","get","id","is","action","res","Attributes","stringify","showMessage","messageError","mesi","split","orders","order","count","d","Date","deliver_at","title","getDate","getMonth","getFullYear","li","class","appendTo","temp","order_items","show","loadPreviousOrder","indexID","email","result","details","unavailable_items","length","missingProducts","unavailableItem","alert","currentOrder","available_items","console","log","err","itemsCarrelloTable","note","cottura","quantity","price","pid","itemsCarrelloCheckout","carrello","total","prods","prod","parseFloat","final_price","variations","value","push","carrelloProd","notes","final_net_price","join","toLocaleString","undefined","maximumFractionDigits","minimumFractionDigits"],"sourceRoot":""}